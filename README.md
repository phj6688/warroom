# âš”ï¸ War Room

> *Eight minds. Five phases. One answer.*

**War Room** is a multi-agent AI deliberation engine that assembles a council of 8 specialized cognitive agents to rigorously analyze complex problems â€” from architecture decisions to strategic pivots. Each agent has a distinct role, reasoning style, and area of expertise. Together they run a structured 5-phase deliberation and produce a synthesized, battle-tested recommendation.

---

## How It Works

A problem is submitted. Eight agents convene. They deliberate across five structured phases. A synthesis emerges.

```
Problem Statement
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1 â€” Problem Framing                                  â”‚
â”‚  ğŸ¯ Process Architect Â· ğŸ” Research Scout Â· ğŸ”— Synthesizer  â”‚
â”‚  â†’ Define scope, gather context, map the terrain            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2 â€” Divergence                                       â”‚
â”‚  ğŸ’¡ Divergent Generator Â· ğŸ”— Synthesizer                    â”‚
â”‚  ğŸ“ Quantitative Expert Â· ğŸ“œ Qualitative Expert             â”‚
â”‚  â†’ Generate solutions without judgment                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3 â€” Convergence                                      â”‚
â”‚  âš–ï¸ Convergent Evaluator Â· ğŸ“ Quantitative Expert           â”‚
â”‚  ğŸ“œ Qualitative Expert Â· ğŸ” Research Scout                  â”‚
â”‚  â†’ Evaluate, rank, and narrow the field                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 4 â€” Red Team                                         â”‚
â”‚  ğŸ”´ Red Teamer Â· âš–ï¸ Convergent Evaluator Â· ğŸ¯ Process Arch  â”‚
â”‚  â†’ Attack every assumption. Find every failure mode.        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 5 â€” Synthesis                                        â”‚
â”‚  ğŸ¯ Process Architect                                       â”‚
â”‚  â†’ Final recommendation with full reasoning chain          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## The Council

| Agent | Role | Hat | Purpose |
|-------|------|-----|---------|
| ğŸ¯ **Process Architect** | Metacognitive Conductor | Blue Hat | Orchestrates the deliberation, ensures rigor, produces final synthesis |
| ğŸ”— **Systems Synthesizer** | Boundary Spanner | Cross-Domain | Connects ideas across disciplines, spots emergent patterns |
| ğŸ’¡ **Divergent Generator** | Creative Disruptor | Green Hat | Generates unconventional ideas without judgment |
| âš–ï¸ **Convergent Evaluator** | Analytical Engine | Black/White Hat | Rigorously evaluates and ranks proposals |
| ğŸ”´ **Red Teamer** | Adversarial Stress-Tester | Devil's Advocate | Attacks every assumption, finds failure modes |
| ğŸ“ **Quantitative Expert** | Technical Depth | STEM | Provides data, math, and empirical grounding |
| ğŸ“œ **Qualitative Expert** | Institutional Depth | Policy/Business | Brings human, organizational, and strategic context |
| ğŸ” **Research Scout** | Information Architect | Intel | Gathers live intelligence via web search (Tavily) |

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              War Room Server               â”‚
â”‚          Node.js + Express + WS            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  WebSocket  â”‚  REST API  â”‚  Static UI      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           SQLite (WAL mode)                â”‚
â”‚  sessions Â· messages Â· escalations        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           LLM Backend                      â”‚
â”‚  OpenClaw Gateway  OR  Anthropic API       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Search Backend (optional)        â”‚
â”‚           Tavily API â†’ Research Scout      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Stack:** Node.js 22 Â· Express Â· WebSocket (`ws`) Â· SQLite (`better-sqlite3`) Â· Docker

---

## API

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/agents` | List all 8 agents with roles and metadata |
| `GET` | `/api/sessions` | List all deliberation sessions |
| `POST` | `/api/sessions` | Create new session (body: `{problem, files[]}`) |
| `GET` | `/api/sessions/:id` | Get session state, messages, escalations |
| `POST` | `/api/sessions/:id/advance` | Advance to next phase |
| `POST` | `/api/sessions/:id/escalate` | Submit escalation answer |
| `GET` | `/api/sessions/:id/export` | Export full session transcript |
| `POST` | `/api/upload` | Upload context files for a session |
| `GET` | `/health` | Service health check |

**WebSocket** at `ws://<host>:8090` â€” real-time agent message streaming during deliberation.

---

## Quick Start

### Docker (recommended)

```bash
git clone git@github.com:phj6688/warroom.git
cd warroom

# Configure
cp .env.example .env
# Edit .env â€” set your LLM backend

# Deploy
docker compose up -d

# Open
open http://localhost:8090
```

### Local

```bash
npm install
node server.js
```

---

## Configuration

Create `.env` from `.env.example`:

```env
# LLM Backend â€” pick one:

# Option A: OpenClaw Gateway (recommended for homelab)
OPENCLAW_GATEWAY_URL=http://your-gateway:18789
OPENCLAW_GATEWAY_TOKEN=your-token
MODEL=anthropic/claude-sonnet-4-6

# Option B: Direct Anthropic API
ANTHROPIC_API_KEY=sk-ant-...
MODEL=claude-sonnet-4-5

# Search (optional â€” enables Research Scout live web search)
TAVILY_API_KEY=tvly-...

PORT=8090
```

---

## MCP Server

War Room ships an MCP (Model Context Protocol) server, enabling any MCP-compatible AI client to create and run War Room sessions programmatically.

```bash
# Run MCP server
node mcp-server.mjs

# Or via npm
npm run mcp
```

---

## Project Structure

```
war-room/
â”œâ”€â”€ server.js           # Main server â€” agents, phases, LLM orchestration
â”œâ”€â”€ mcp-server.mjs      # MCP server for AI client integration
â”œâ”€â”€ mcp-server.js       # MCP server (CommonJS variant)
â”œâ”€â”€ db.js               # Database helpers
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html      # Web UI â€” real-time deliberation interface
â”œâ”€â”€ data/               # SQLite database (gitignored)
â”œâ”€â”€ uploads/            # Uploaded context files (gitignored)
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â””â”€â”€ tests/
    â””â”€â”€ export.test.mjs
```

---

## Use Cases

- **Architecture decisions** â€” Should we use microservices or a monolith?
- **Strategic pivots** â€” Where should this product go next?
- **Technical tradeoffs** â€” Which database fits this workload?
- **Risk analysis** â€” What can go wrong with this plan?
- **Research synthesis** â€” What does the literature say about X?

Any problem worth thinking hard about is worth running through the War Room.

---

## Part of the LUMO Homelab

War Room is one node in a broader homelab AI swarm:

| Service | Purpose |
|---------|---------|
| **War Room** | Multi-agent deliberation engine |
| **Cortex** | Project and task management |
| **IRIS** | Video intelligence platform |
| **Squad Monitor** | Agent message bus and event backbone |
| **ER Bridge** | Circuit breaker and approval gate |

---

*Built with conviction. Runs on premises. Answers with evidence.*
